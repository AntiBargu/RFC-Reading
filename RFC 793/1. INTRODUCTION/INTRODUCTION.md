设计目的以及应用场景：在**分组交换网络**中实现**高可靠**主机间通信协议。



#### 1.1. 动机（Motivation）

TCP 是面向连接的、端到端的可靠通讯协议，它被设计到一个支持多网络应用的层级网络协议栈中。并**提供跨主机的可靠 IPC**。

TCP 协议**对于其下层通信协议的可靠性几乎没有做出任何假设**。TCP 假设可以从低层协议获得简单但潜在不可靠的数据报服务。



#### 1.2. 范围（Scope）

TCP 旨在在多网络环境中**提供可靠的进程间通信服务**，成为多种网络环境中广泛使用的通讯协议。



#### 1.4. 接口（Interfaces）

TCP 提供了一组类似于操作文件的接口用于应用程序进程与 TCP 之间的通信。这些调用包括**建立连接**、**关闭连接**以及在**连接建立后发送和接收数据**等功能。



#### 1.5. 操作（Operation）

要在不可靠的互联网通信系统之上提供可靠的进程间通信服务，需要在以下几个方面提供支持：

- 基本数据传输（Basic Data Transfer）
- 可靠性（Reliability）
- 流量控制（Flow Control）
- 多路复用（Multiplexing）
- 连接管理（Connections）
- 优先级和安全性（Precedence and Security）



##### 基本数据传输（Basic Data Transfer）

TCP **基于数据流**，将数据打包成段进行传输。可根据自身需要决定何时阻塞数据，并在合适时转发数据。为了确保数据及时到达接收方，TCP 还提供 push 功能。



##### 可靠性（Reliability）

TCP 必须能够从**数据损坏**、**丢失**、**重复**或**乱序传输**而引起的问题中恢复过来。

为了实现可靠性，TCP 给发送的每个字节数据分配一个**序列号**（sequence number）。

接收方 TCP 通过 **ACK**（acknowledgment）来确认接收到的段。

如果在规定的**超时**时间内未收到 ACK，TCP 会认为数据丢失，并**重传**数据。



##### 流量控制（Flow Control）

TCP 提供了一种**接收方控制发送方发送数据量的机制**。

> 拥塞控制不一定是发送方主动控制发送。比如 ECN 机制。

通过**在每个 ACK 中返回一个 “窗口” 来实现**，该窗口指示了发送方在接收到进一步允许之前可以发送的字节数。



##### 多路复用（Multiplexing）

TCP 通过在每个主机内提供称为 “**端口**” 来实现多路复用。这些端口与网络层的主机地址结合，形成一个**套接字**（socket）。**一对套接字标识一个连接**。一个套接字可以同时在多个连接中使用。



##### 连接管理（Connections）

可靠性和流量控制机制要求 TCP 为每个数据流初始化并**维护一些状态信息**。包括套接字、序列号和窗口大小在内的这些**信息的组合**被称为**连接**。每个连接由一对套接字唯一指定其两端。

当两个进程希望通信时，它们的 TCP 首先必须建立连接（在每一侧初始化状态信息）。当它们的通信完成时，连接会被终止或关闭，以释放资源供其他用途使用。

**由于连接必须在不可靠的主机和不可靠的网络通信系统之间建立，因此使用了基于时钟的序列号握手机制，以避免连接初始化时的错误**。

> 连接是状态的集合，状态由 TCP 提供的一系列机制产生。