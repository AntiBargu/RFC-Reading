#### 2.3. 主机环境（The Host Environment）

假定 TCP 作为操作系统中的一个模块。用户采用类似于访问文件系统的方式访问 TCP。

TCP 并不直接调用网络设备驱动程序。



#### 2.4. 接口（Interfaces）

TCP 的接口允许用户通过 TCP 进行 **OPEN** 或 **CLOSE** 连接、**SEND** 或 **RECEIVE** 数据，或获取连接的 **STATUS**。这些调用类似于操作系统中打开、读取和关闭文件等操作。



#### 2.5. 与其他协议的关系（Relation to Other Protocols）

```shell
       +------+ +-----+ +-----+       +-----+
       |Telnet| | FTP | |Voice|  ...  |     |  Application Level
       +------+ +-----+ +-----+       +-----+
             |   |         |             |
            +-----+     +-----+       +-----+
            | TCP |     | RTP |  ...  |     |  Host Level
            +-----+     +-----+       +-----+
               |           |             |
            +-------------------------------+
            |    Internet Protocol & ICMP   |  Gateway Level
            +-------------------------------+
                           |
              +---------------------------+
              |   Local Network Protocol  |    Network Level
              +---------------------------+
 
                         Protocol Relationships
```



#### 2.6. 可靠传输（Reliable Communication）

通过使用**序列号**和**确认**来实现传输的可靠性。

概念上，数据流中的每个字节都被分配一个序列号。数据段中的**第一个字节的序列号**与该段一起传输，并称为**段序列号**。段还携带**确认号**，即反向传输中**下一个预期数据字节的序列号**。

为了控制 TCP 之间的数据流，采用了流量控制机制。接收端 TCP 向发送端 TCP 通告一个 “窗口”。该窗口指定了从确认号开始，接收端 TCP 当前准备接收的字节数量。



#### 2.7. 连接的建立与清除（Connection Establishment and Clearing）

连接由两端的套接字对指定。本地套接字可以参与到与不同外部套接字的多个连接中。连接可以用来双向传输数据，即它是 “全双工” 的。

TCP 通过某些方式将其与 “适当” 的进程关联起来。进程可以 “拥有” 端口，并且进程只能在它们拥有的端口上发起连接。

我们假定有一个称为**传输控制块**（TCB）的数据结构来存储连接状态信息。OPEN 调用应当指出连接建立是**主动**的还是**被动**的。

建立连接的过程利用同步（**SYN**）控制标志，并涉及三条消息的交换。这种交换被称为三次握手 [3]。

连接的清除也涉及段的交换，此时携带 **FIN** 控制标志。



#### 2.8. 数据传输（Data Communication）

数据在连接上流动可以被看作是一串字节流。发送方用户在每次发送调用中通过设置 PUSH 标志来指示是否应立即将该调用中的数据（以及任何之前的调用）推送给接收方用户。

任何特定段中的数据可以是单个 SEND 调用的结果，整体或部分，也可以是多个 SEND 调用的结果。
